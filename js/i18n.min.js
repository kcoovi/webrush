const i18n={currentLang:"fr",translations:{},languages:{fr:{name:"FranÃ§ais",flag:"FR"},en:{name:"English",flag:"EN"}},async init(){console.log("i18n: Initializing..."),this.currentLang=localStorage.getItem("webrush-lang")||"fr",console.log("i18n: Current language:",this.currentLang),await this.loadTranslations(this.currentLang),this.applyTranslations(),this.updateSelector(),this.setupDropdown(),console.log("i18n: Initialization complete")},async loadTranslations(t){console.log("i18n: Loading translations for:",t);try{const n=await fetch(`/lang/${t}.json`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);this.translations=await n.json(),console.log("i18n: Translations loaded successfully")}catch(t){console.error("i18n: Error loading translations:",t)}},async switchLanguage(t){console.log("i18n: Switching to language:",t),t!==this.currentLang?(this.currentLang=t,localStorage.setItem("webrush-lang",t),await this.loadTranslations(t),this.applyTranslations(),this.updateSelector(),this.closeDropdown(),console.log("i18n: Language switch complete")):console.log("i18n: Already using this language")},applyTranslations(){console.log("i18n: Applying translations...");const t=document.querySelectorAll("[data-i18n]");console.log("i18n: Found",t.length,"elements to translate"),t.forEach(t=>{const n=t.getAttribute("data-i18n"),e=this.getNestedValue(this.translations,n);e&&(t.textContent=e)}),document.querySelectorAll("[data-i18n-placeholder]").forEach(t=>{const n=t.getAttribute("data-i18n-placeholder"),e=this.getNestedValue(this.translations,n);e&&(t.placeholder=e)}),document.querySelectorAll("[data-i18n-error]").forEach(t=>{const n=t.getAttribute("data-i18n-error"),e=this.getNestedValue(this.translations,n);e&&(t.oninvalid=function(){this.setCustomValidity(e)},t.oninput=function(){this.setCustomValidity("")})}),document.documentElement.lang=this.currentLang,console.log("i18n: Translations applied")},updateSelector(){const t=this.languages[this.currentLang],n=document.querySelector(".lang-current .lang-flag"),e=document.querySelector(".lang-current .lang-code");n&&(n.textContent=t.flag),e&&(e.textContent=this.currentLang.toUpperCase()),document.querySelectorAll(".lang-option").forEach(t=>{const n=t.getAttribute("data-lang");t.classList.toggle("active",n===this.currentLang)})},setupDropdown(){const t=document.querySelector(".lang-selector"),n=document.querySelector(".lang-current");if(!t||!n)return void console.log("i18n: Language selector not found on this page");console.log("i18n: Setting up dropdown event listeners"),n.addEventListener("click",n=>{n.stopPropagation(),t.classList.toggle("open")}),document.addEventListener("click",()=>{this.closeDropdown()});const e=this;document.querySelectorAll(".lang-option").forEach(t=>{t.addEventListener("click",function(t){t.stopPropagation();const n=this.getAttribute("data-lang");console.log("i18n: Option clicked, language:",n),e.switchLanguage(n)})}),console.log("i18n: Dropdown setup complete")},closeDropdown(){const t=document.querySelector(".lang-selector");t&&t.classList.remove("open")},getNestedValue:(t,n)=>n.split(".").reduce((t,n)=>t&&void 0!==t[n]?t[n]:null,t)};document.addEventListener("DOMContentLoaded",()=>{console.log("i18n: DOM loaded, starting init"),i18n.init()});